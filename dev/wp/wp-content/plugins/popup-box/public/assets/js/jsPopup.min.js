/*!
 * ========= INFORMATION ============================
 * - document:  Popup Box
 * - brand:     Wow-Company
 * - brand-url: https://wow-company.com/
 * - store-url: https://wow-estore.com/
 * - author:    Dmytro Lobov
 * - url:       https://wordpress.org/plugins/popup-box/
 * ====================================================== */
"use strict";const PopupBox=function(e,t,o){let n=Object.assign({block_page:!1,open_popup:"click",open_delay:"0",open_distance:"0",open_popupTrigger:"ds-open-popup-1",close_popupTrigger:"ds-close-popup",auto_closePopup:!1,auto_closeDelay:"0",redirect_onClose:!1,redirect_URL:"",redirect_target:"_blank",cookie_enable:!1,cookie_name:"ds-popup-1",cookie_days:"30",active_url:{enable:!1,url:"popup=active"},referrer_url:{enable:!1,url:""},loop:{start:5,end:10,counter:3},overlay_closesPopup:!0,overlay_isVisible:!0,overlay_animation:"fadeIn",overlay_css:{background:"rgba(0, 0, 0, .75)"},popup_zindex:"999",popup_esc:!0,popup_animation:"fadeIn",popup_position:"-center",popup_css:{width:"550px",height:"auto",padding:"15px",background:"#ffffff"},content_css:{padding:"15px"},close_isVisible:!0,close_outer:!1,close_position:"-topRight",close_type:"-text",close_content:"Close",close_css:{"font-size":"12px",color:"#000000"},mobile_show:!0,mobile_breakpoint:"480px",mobile_css:{width:"100%"},video_enable:!1,video_autoPlay:!0,video_onClose:!0,tracking_open:{enable:!1,category:"Popup Box",action:"Popup Open"},tracking_close:{enable:!1,category:"Popup Box",action:"Popup Close"}},t),i="ds-popup",c=o,r=c.querySelector(".ds-popup-wrapper"),l=c.querySelector(".ds-popup-content"),s=function(){if(!n.overlay_isVisible)return!1;let e=document.createElement("div");return e.className=i+"-overlay fadeIn",c.prepend(e),c.querySelector(".ds-popup-overlay")}(),a=function(){if(!n.close_isVisible)return!1;let e=document.createElement("div");return e.className=i+"-close",r.prepend(e),r.querySelector(".ds-popup-close")}(),u=function(){let e=c.querySelector('iframe[src*="youtube.com"]'),t=c.querySelector('iframe[src*="vimeo.com"]');return e||(t||!1)}(),p=1,d=l.innerHTML,f=d.match(/\{\{(.*?)\}\}/g)?.map((e=>e.slice(2,-2)))||[];function _(e){let t="";for(let o in e)t+=o+":"+e[o]+";";return t}function g(){!function(){if(!s)return;s.style.cssText="z-index:"+(n.popup_zindex-3)+";"+_(n.overlay_css),s.setAttribute("data-ds-effect",n.overlay_animation)}(),function(){if(!l)return;l.style.cssText="z-index:"+(n.popup_zindex-1)+";"+_(n.content_css)}(),function(){if(!r)return;r.style.cssText="z-index:"+(n.popup_zindex-2)+";"+_(n.popup_css),r.classList.add(n.popup_position),r.setAttribute("data-ds-effect",n.popup_animation),window.screen.width<=parseInt(n.mobile_breakpoint)&&(r.style.cssText+=_(n.mobile_css));!function(){let e=getComputedStyle(r),t=e.height,o=e.width;if("auto"===t){r.style.display="block";let e=r.offsetHeight;r.style.display="",r.style.height=e+"px"}if("auto"===o){r.style.display="block";let e=r.offsetWidth;r.style.display="",r.style.width=e+"px"}switch(n.popup_position){case"-center":r.style.bottom="0",r.style.right="0";break;case"-bottomCenter":case"-topCenter":r.style.right="0"}}()}(),function(){if(!a)return;a.classList.add(n.close_position,n.close_type),a.style.cssText="z-index:"+n.popup_zindex+";"+_(n.close_css),a.setAttribute("data-ds-close-text",n.close_content),n.close_outer&&a.classList.add("-outer");if("-tag"===n.close_type||"-icon"===n.close_type){let e=a.style.fontSize,t=parseInt(e)+5,o={width:t+"px",height:t+"px","line-height":t+"px"};a.style.cssText+=_(o)}}()}function y(){let e=n.open_popup;if(!0===function(){if(!0!==n.active_url.enable)return!0;const e=n.active_url.url.split("="),t=e[0],o=e[1],i=new URLSearchParams(document.location.search);if(i.get(t)===o)return!0;return!1}()&&!0===function(){if(!0!==n.referrer_url.enable)return!0;if(""===n.referrer_url.url)return!0;return document.referrer.includes(n.referrer_url.url)}())switch(e){case"click":!function(){let e=n.open_popupTrigger;document.querySelectorAll("."+e+', a[href$="'+e+'"]').forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),v()}))}))}();break;case"hover":!function(){let e=n.open_popupTrigger;document.querySelectorAll("."+e+', a[href$="'+e+'"]').forEach((e=>{e.addEventListener("mouseover",(e=>{e.preventDefault(),v()}))}))}();break;case"auto":setTimeout((function(){v()}),1e3*n.open_delay);break;case"scrolled":!function(){let e=!1;window.addEventListener("scroll",(function(t){let o=window.scrollY/(document.body.clientHeight-window.innerHeight);Math.round(100*o)>=n.open_distance&&(e||(v(),e=!0))}))}();break;case"rightclick":document.addEventListener("contextmenu",(function(e){return v(),!1}));break;case"selected":document.addEventListener("mouseup",(function(e){(window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange&&document.selection.createRange().text).toString().length>2&&v()}));break;case"exit":!function(){let e=!1;document.addEventListener("mouseout",(function(t){t.clientY<0&&!e&&(v(),e=!0)}))}();break;case"loop":b()}}function b(){const e=Math.floor(Math.random()*(n.loop.end-n.loop.start+1))+n.loop.start;p>n.loop.counter||setTimeout((function(){v(),p++}),1e3*e)}function m(){if(f.length>0){let e=0;l.innerHTML=d.replace(/\{\{(.*?)\}\}/g,(function(t,o){e++;const n=function(e){const t=e.split("|"),o=Math.floor(Math.random()*t.length);return t[o].trim()}(o);return`<span class='popup-span-box-${e}'>${n}</span>`}))}}function v(){if(!(!1===function(){if(!n.mobile_show){if(window.screen.width<=parseInt(n.mobile_breakpoint))return!1}}()||function(e){const t=localStorage.getItem(e);if(!t)return!1;const o=JSON.parse(t);if((new Date).getTime()>o.expiry)return localStorage.removeItem(e),!1;return!0}(n.cookie_name)&&n.cookie_enable)){if(c.classList.add("ds-active"),s&&(s.style.display="block"),m(),r.style.display="block",n.block_page){document.querySelectorAll("html, body").forEach((e=>{e.classList.add("no-scroll")}))}!function(){if(!n.video_enable||!n.video_autoPlay||!u)return;let e=u.getAttribute("src");u.setAttribute("src",e+"?autoplay=1")}(),function(){if(!n.auto_closePopup)return;setTimeout((function(){h()}),1e3*n.auto_closeDelay)}(),function(){if(!n.tracking_open.enable)return!1;const e=n.tracking_open.action;let t={event_category:n.tracking_open.category};n.tracking_open.label&&(t.event_label=n.tracking_open.label);n.tracking_open.value&&(t.value=n.tracking_open.value);"function"==typeof window.gtag&&gtag("event",e,t)}()}}function k(){!function(){let e=c.querySelector("."+n.close_popupTrigger);e&&(console.log(e),e.addEventListener("click",(e=>{h()})))}(),function(){if(!n.popup_esc)return;window.addEventListener("keydown",(function(e){"Escape"!==e.key&&"Esc"!==e.key||h()}))}(),function(){if(!n.overlay_closesPopup||!s)return;s.addEventListener("click",(function(){h()}))}(),a&&a.addEventListener("click",(()=>{h()}))}function h(){!function(){if(!n.cookie_enable)return;const e=n.cookie_days,t=new Date,o=24*e*60*60*1e3,i={value:"yes",expiry:t.getTime()+o};localStorage.setItem(n.cookie_name,JSON.stringify(i))}(),c.classList.remove("ds-active"),function(){if(!n.video_enable||!n.video_onClose||!u)return;let e=u.getAttribute("src");e=e.split("?")[0],u.setAttribute("src",e+"?autoplay=0")}(),function(){if(!n.tracking_close.enable)return!1;const e=n.tracking_close.action;let t={event_category:n.tracking_close.category};n.tracking_close.label&&(t.event_label=n.tracking_close.label),n.tracking_close.value&&(t.value=n.tracking_close.value),"function"==typeof window.gtag&&gtag("event",e,t)}(),setTimeout((function(){s&&(s.style.display=""),r.style.display=""}),600),document.querySelectorAll("html, body").forEach((e=>{e.classList.remove("no-scroll")})),function(){if(!n.redirect_onClose)return;let e=n.redirect_URL;""!==e&&e.indexOf("http")>-1&&window.open(e,n.redirect_target)}(),"loop"===n.open_popup&&b()}return g(),y(),void k()};document.addEventListener("DOMContentLoaded",(function(){if("undefined"!=typeof PopupBoxObj)for(var e in PopupBoxObj){const t=document.getElementById(`ds-popup-${e}`),o=PopupBoxObj[e].selector,n=PopupBoxObj[e];new PopupBox(o,n,t)}}));